# 正则表达式

## 什么是正则表达式

- 正则表达式（regular expression）描述了字符串的“构成模型”，经常被用于检查字符串是否符合预订的格式要求

## 正则表达式“按位”表述规则

- 正则表达式“按位”描述规则，是指它是一位一位的描述字符串的构成形式
- 比如检查字符串是不是这样的，以字母m开头，然后是3个数字，最后以字母n结尾

```js
let regPatten = /^m\d\d\dn$/
//^表示开头
//$表示结尾
//\d表示数字
//\d\d\d也可以写作\d{3}
```

## 正则表达式的创建

- 使用**/内容/**的语法形式，可以快速创建正则表达式
- 也可以使用new RegExp('内容')的形式，创建正则表达式
- 使用typeof运算符检查正则表达式的类型，结果是object

## 元字符

- “元字符”是指一位指定类型的字符

元字符|功能
-|-
\d|匹配一个数字
\D|匹配一个非数字字符
\w|匹配一个单字字符（字母、数字或者下划线）
\W|匹配一个非单字字符
\s|匹配一个空白字符，包括空格、制表符和换行符
.|任意字符

### 元字符注意事项

- 如果使用new RegExp()写法，反斜杠需要多写一个

```js
//下面这两个表达式是相同的意思
let exp1 = /^\d$/;

let exp2 = new RegExp('^\\d$');
```

### 元字符使用举例

- 某快递公司运单号形式是这样的：123-4567-890，请使用正则表达式检车某字符串是否符合此格式

```js
let regExp = /^\d{3}-\d{4}-\d{3}$/;
```

- 某产品的验证秘钥形式是这样的：□□□-□□□□-□□□，其中□表示字母数字或者下划线，请使用正则表达式检查某字符串是否符合此格式

```js
let regExp = /^\w{3}-\w{4}-\w{3}$/;
```

### 字符的转义

- 在特殊字符之前的反斜杠\表示下一个字符不是特殊字符，应该按照字面理解

```js
/^.$/; //检查字符串是不是任意字符
/^\.$/; //检查字符串是不是一个点
```

- 不管一个符号有没有特殊意义，都可以在其之前加上一个\以确保它表达的是这个符号本身

```js
//举例：某产品批号形式为123.45^67#89,请使用正则表达式检查某字符串是否符合此格式
let regexp = /^\d{3}\.\d{2}\^\d{2}\#\d{2}$/;
```

## 方括号表示法

- 使用方括号，比如[xyz]，可以创建一个字符集合，表示匹配方括号中的任意字符

```js
//比如某学校的序号规定：第1位是一个字符，b表示本科生，y表示研究生，后面是7位数字
let regexp = /^[by]\d{7}$/；
```

- 可以使用短横-来指定一个字符范围，^表示否定

元字符|等价的方括号表示法
-|-
\d|[0-9]
\D|[^0-9]
\w|[A-Za-z0-9_]
\W|[^A-Za-z0-9_]

### 方括号表示法小题目

```js
//题目1：请验证某字符串是否是5位字母，大小写均可
let regExp1 = /^[A-Za-z]{5}$/;

//题目2：请验证某字符串是否是5位，且仅有小写字母、点构成
let regExp = /^[a-z\.]{5}$/

//题目3：请验证某字符串是否是4位小写字母，且最后一位不能是m字母
let regExp = /^[a-z]{3}[a-ln-z]$/;
```

## 量词

量词|意义
-|-
*|匹配前一个表达式0次或多次。等价于{0,}
+|匹配前一个表达式1次或者多次。等价于{1,}
?|匹配前一个表达式0次或1次。等价于{0,1}
{n}|n是一个整数，匹配前一个字符刚好出现n次
{n,}|n是一个整数，匹配前一个字符至少出现n次
{n,m}|n和m都是整数，匹配前面的字符至少n次，最多m次

### 量词小题目

```js
//题目1：请验证字符串是否符合手机号的规则：11位数字，并且肯定以1开头
let regExp1 = /^1\d{10}$/

//题目2： 请验证某字符串是否是这样的：以字母开头，中间是任意数字（最少1位）构成，并以字母结尾
let regExp2 = /^[A-Za-z]\d+[A-za-z]$/

//题目3: 请验证某字符串是否符合网址规则：以www.开头，中间是任意位的字符（字母数字下划线），最后以.com结尾，也可以以.com.cn结尾
let regExp3 = /^www\.\w+\.com(\.cn)?$/

```

## 修饰符

- 修饰符也叫作标志（flags），用于使用正则表达式实现高级搜索

修饰符|意义
-|-
i|不区分大小写搜索
g|全局搜索

- 修饰符的使用

```js
var re = /m/gi;
var re = new RegExp('m', 'gi');
```

## 正则表达式的相关方法

- 正则表达式可以“打点”调用哪些方法呢？

方法|简介
-|-
test()|测试某字符串是否匹配正则表达式，返回布尔值
exec()|根据正则表达式，在字符串中进行查找，返回结果数组或者null

### test()方法

- 正则表达式的test()方法用来测试某字符串是否匹配此正则表达式，它返回true或false

```js
/^[a-z]{3}[a-ln-z]$/.text('abcd');
```

### exec()方法

- exec()方法功能是：在一个指定字符串中执行一个搜索匹配查找，返回一个结果数组或null

```js
var str = 'abc123def456ghi789';
var regexp = /\d+/;
var result = regexp.exec(str);
//['123', index: 3, input: 'abc123def456ghi789', groups: undefined]
```

#### exec()方法的逐条遍历

- exec()方法最有趣的是，有"g"修饰符的正则表达式将自动成为“有状态”的，这意味着可以对单个字符串的多次匹配结果进行逐条遍历

```js
var str = 'abc123def456ghi789';
var regexp = /\d+/;
var result1 = regexp.exec(str);
//['123', index: 3, input: 'abc123def456ghi789', groups: undefined]
var result2 = regexp.exec(str);
//['456', index: 9, input: 'abc123def456ghi789', groups: undefined]
var result3 = regexp.exec(str);
//['789', index: 15, input: 'abc123def456ghi789', groups: undefined]
var result4 = regexp.exec(str);
//null


var result;
while(result = regexp.exec(str)){
  console.log(result);
}
```

## 字符串的相关方法

- 字符串有哪些方法可以使用正则表达式呢？

方法|简介
-|-
search()|在字符串中根据正则表达式进行查找匹配，返回首次匹配到的位置索引，测试不到则返回-1
match()|在字符串中根据正则表达式进行查找匹配，返回一个数组，找不到则返回null
replace()|使用替换字符串替换掉匹配的子字符串，可以使用正则表达式
split()|分隔字符串为数组，可以使用正则表达式

## 正则表达式的应用

- 用正则表达式进行表单验证是正则表达式最重要的实际应用
- 实际上，很多正则表达式不需要我们自己写，可以通过搜索引擎查找，可以拿来即用
