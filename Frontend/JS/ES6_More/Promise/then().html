<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>then()</title>
</head>
<body>
  <script>
    //1.什么时候执行
    //pending->fulfilled,执行then的第一个回调函数
    //pending->rejected,执行then的第二个回调函数

    //2.执行后的返回值
    //then方法执行后返回一个新的Promise对象
    /*
    const p = new Promise((resolve, reject)=>{
      resolve();
      //reject();
    });
    const p2 = p.then(
      ()=>{}, 
      ()=>{}
    );

    console.log(p, p2, p === p2);
    */

    //3.then方法返回的Promise对象的状态改变
    const p = new Promise((resolve, reject)=>{
      resolve("success");
      //reject();
    });
    p.then(
      (data)=>{
        console.log("success1: " + data);
        //在then的回调函数中，return后面的东西，会用Promise包装一下
        return "111";
        //等价于
        return new Promise((resolve, reject)=>{
          resolve("111");
        })
        //默认人会的永远都是成功状态的Promise对象
      }, 
      ()=>{
        console.log("err1");
      }
    ).then(
      (data)=>{
        console.log("success2: " + data);
      },
      ()=>{
        console.log("err2");
      }
    );

  </script>
</body>
</html>